---
- hosts: all
  become: yes
  become_method: sudo
  tasks:
    - name: Add PPAs
      apt_repository:
        repo: 'ppa:neovim-ppa/stable'

    - name: Update cache
      apt:
        update_cache: yes
        state: present

    - name: Install base pacakges
      apt: name={{item}} state=present
      with_items:
        - openjdk-8-jdk
        - gradle
        - postgresql
        - xclip
        - powerline
        - curl
        - tree
        - git
        - tmux
        - neovim
        - nodejs-legacy
        - npm

    - name: Install Vim-Plug
      shell: curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs \
        https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

    - name: Install Tmux plugin manager (tpm)
      git:
        repo: 'https://github.com/tmux-plugins/tpm'
        dest: ~/.tmux/plugins/tpm

    - name: Update Node and Npm
      shell: npm install -g npm && npm install -g n && n stable

    - name: Autoremove
      apt:
        autoremove: yes
